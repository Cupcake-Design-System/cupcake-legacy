////
/// @group accordion
////

/// $accordion-item-border
$accordion-item-border: 1px solid $color-gray-3 !default;

/// $accordion-item-first-child-border
$accordion-item-first-child-border: $accordion-item-border !default;

/// $accordion-item-last-child-border
$accordion-item-last-child-border: $accordion-item-border !default;

/// $accordion-item-content-padding
$accordion-item-content-padding: 0 16px !default;

/// $accordion-item-panel-bd-color-hover
$accordion-item-panel-bd-color-hover: $color-gray-2 !default;

/// $accordion-item-panel-bg
$accordion-item-panel-bg: $color-gray-1 !default;

/// $accordion-item-panel-bg-hover
$accordion-item-panel-bg-hover: $color-gray-0 !default;

/// $accordion-item-panel-opened-bg
$accordion-item-panel-opened-bg: inherit !default;

/// $accordion-item-right-part-spacing
$accordion-item-right-part-spacing: 15px !default;

/// $accordion-item-arrow-color
$accordion-item-arrow-color: $color-gray-7 !default;

/// data to show/hide panel
$show-content: 500px !default;
$hide-content: 0 !default;

/// data to rotate arrow
$arrow-rotate-deg: 90deg !default;

@mixin expand($state) {
  max-height: $state;
  transition: max-height 0.35s;
}

@mixin rotate($deg) {
  transform: rotate($deg);
}

@mixin accordion {
  .c-accordion {
    padding-left: 0;
    padding-right: 0;

    @include trigger;
    @include accordion-item;
  }
}

@mixin accordion-item {
  &-item {
    position: relative;
    cursor: pointer;
  
    &-content {
      @include expand($hide-content);

      height: auto;
      padding: $accordion-item-content-padding;
      background: $accordion-item-panel-bg;
      transition: max-height 0.15s;
      overflow: auto;
    }

    &:focus > &-panel,
    &:hover > &-panel {
      background-color: $accordion-item-panel-bg-hover;
      border-color: $accordion-item-panel-bd-color-hover;
      border-bottom-color: $accordion-item-panel-bd-color-hover;
    }

    &-right {
      padding-left: $accordion-item-right-part-spacing;
      display: flex;
      flex-grow: 1;
      justify-content: flex-end;
      align-items: center;
      color: $accordion-item-arrow-color;

      & > * {
        margin-left: $accordion-item-right-part-spacing;
      }

      & > i {
        transition: transform 0.15s;
      }
    }
  }
}

@mixin trigger {
  &-trigger {
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;

    &:checked ~ .c-accordion-item-panel {
      background: $accordion-item-panel-opened-bg;
    }

    &:checked ~ .c-accordion-item-content {
      @include expand($show-content);
    }

    &:checked ~ .c-accordion-item-panel {
      & i {
        @include rotate($arrow-rotate-deg);
      }
    }
  }
}
